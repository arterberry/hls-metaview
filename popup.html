<!DOCTYPE html>
<html>
<head>
    <title>VIDINFRA MetaView</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <h1>VIDINFRA MetaView</h1>
    <button id="closeButton">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
            <path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/>
        </svg>
    </button>
    
    <div class="main-container">
        <div class="left-panel">
            <div class="video-container">
                <video id="videoPlayer" controls></video>
            </div>
            <div class="metadata-section">
                <div class="metadata-label"></div>
                <div id="metadataPanel">
                    <div id="metadataList"></div>
                </div>
                <div class="export-area">
                     <!-- Admin button on the left -->
                     <button id="adminButton">Admin</button>
                     <!-- Export and Clear buttons will be added by JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="right-panel">
            <div class="controls-section">
                <div class="controls-label">Controls</div>
                <div class="input-group">
                    <input type="text" id="hlsUrl" placeholder="https://d1ns9k5qrxc5w8.cloudfront.net/9bf31c7ff062936a067ca6938984d388/k8s/live/scte35.isml/.m3u8">
                    <button id="playVideo">Play</button>
                </div>
                <div class="helper-link">
                    <a href="#" id="playbackHelper">Playback Helper</a>
                </div>

                <!-- Tab System -->
                <div class="tab-container">
                    <div class="tab-nav">
                        <button class="tab-button active" data-tab="inspect">Inspect</button>
                        <button class="tab-button" data-tab="qoe">QoE</button>
                        <button class="tab-button" data-tab="ai">AI</button>
                    </div>
                    
                    <!-- Tab Contents -->
                    <div class="tab-content">
                        <!-- Inspect Tab (Original Content) -->
                        <div class="tab-pane active" id="inspect-tab">
                            <div class="resolutions-section">
                                <div class="resolutions-label">Available Resolutions:</div>
                                <div id="resolutionList" class="resolution-container"></div>
                            </div>

                            <div class="cache-metrics-section">
                                <div class="cache-metrics-label">Cache Hit Ratio Performance:</div>
                                <div class="cache-graph-container">
                                    <canvas id="cacheHitMissGraph" width="260" height="100"></canvas>
                                    <div class="cache-stats">
                                        <span id="hitRatio">Hit Ratio: 0</span>
                                        <span id="segmentCount">Segments: 0</span>
                                    </div>
                                </div>
                            </div>
                    
                            <div class="cache-ttl-section">
                                <div class="cache-ttl-label">Cache TTL:</div>
                                <div id="cacheTtlDisplay" class="cache-ttl-container">No TTL information available</div>
                            </div>
                            
                            <div class="explain-link-container">
                                <span class="explain-link"><a href="#" id="cacheExplainer">Explain</a></span>
                            </div>

                            <div class="scte-section">
                                <div class="scte-label">SCTE-35 / Ad Tracking:</div>
                                <div id="scteDisplay" class="scte-container">No SCTE-35 markers detected</div>
                                <div class="ad-graph-container">
                                    <canvas id="adRatioGraph" width="260" height="60"></canvas>
                                    <div class="ad-stats">
                                        <span id="adRatio">Ad Ratio: 0%</span>
                                        <span id="adCount">Ads: 0</span>
                                    </div>
                                </div>                                
                                <div class="explain-link-container">
                                    <span class="explain-link"><a href="#" id="scteExplainer">Explain</a></span>
                                </div>                                
                            </div>                            
                        </div>
                        
                        <!-- QoE Tab -->
                        <div class="tab-pane" id="qoe-tab">
                            <div class="empty-tab-message">QoE metrics will appear here</div>
                        </div>
                        
                        <!-- AI Tab -->
                        <div class="tab-pane" id="ai-tab">
                            <div class="empty-tab-message">AI analysis will appear here</div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab content goes above this -->
                
                <!-- Placeholder Button at Bottom -->
                <!-- <div class="placeholder-button-container"> -->
                    <!-- <button id="placeholderButton">Place Holder</button> -->
                <!-- </div> -->
            </div>
        </div>
    </div>

    <!-- Load order -->
    <script src="hls.min.js"></script>
    <script src="metadata.js"></script>
    <script src="popup.js"></script>
    <script src="export.js"></script>
</body>
</html>